var fnoWallets = {
    "Thaumic" : "8wjbjpKucDLctKSK7Ma4WkaRhcxhUAwGaMJj22QF1bXsGX4AEvdciykRzC9UutNqpQjU1g9R6CXzq2sixDqqTVu9GiVZWdB",
    "Online" : "93Qan7JqcWNfFrakhvFXb37JcJGe3YvsGL59L51dXL1o8GUStxzrmzRTiqFNAejBBVLxDd5mUKBNYP9STU3qzbrU7rSrtFCxGfC65g3Lrn",
    "faucet1" : "8zf2sG57Taq5jNGwPnhju8FwBAAobFsv58KctNfwWR6Jd2QaYJC7uHsfcvHZVuQ6ZwSTULpZdEAfwhtyVkVA9nFaL29dzsw",
    "faucet2" : "8uorGCRgXvhh7EKJ4yMEnbWER7q9eAxVW4GJxCTZWAz2PCMAZLAaAa65Zq43BU2VPrNsfoYD2X78GZwN3SEECucGKQ8o9Et",
    "faucet3" : "8xkLuu8pCg83QvVLV4qQxbCrhv1pzTeF2aJP7piwkG2vgqYatXzx3vjSR8UrLzbxZf4i9UK3FHDaSZza8wbr6AtVLVjFuL5",
    "faucet4" : "8xtXnAesHHPeYM1x3SiY9GXUMrFPZnmpxWo2PTsFCCf2SPkTpGN7QD92UmtP232xg8MEMmeWeCTWGbiSym58U9nh1XoLoAo",
    "faucet5" : "92UTrHPHxBRXEY8xD5CkXcFoiucyTZmvrLpnWmmPBgRGGxBFAEkxpkiKyRJjGqmdS9YRPN8kQ9FwrRE7pZszJoMePVnVumq",
    "faucet6" : "8t3z2DxSiYwfVwmeyGk2cV7NMSn5y7rSK8hVPeCuywyrA4Xhf7ebn5TbrsxEy7RJPeFPcxBePyxr121SC85gtFNwLrYEKTD",
    "faucet7" : "92bUELoQvzJieBoR8oeFFJgbbJ9AbKUEZVLWNqU5yG9oTZRAJ9PoQAWPHYv5vFikEwRcrSFtXe4vKiF2UiX6n7rP7e5YPSF",
    "faucet8" : "8yEoNG6StjbLQyJFSodCzP1z9nAg37oZRPs8ckVGsrTF9zt3DGYotBfMwmm1gnLosw18YmpiSNxCgNiH2g4XZSFMLkGmfow",
    "faucet9" : "8trtz51nC5MS9zeWMtZU2QbCComPesoSdfy5wiyzwETPLzYNukmTfYp5MCurnj9iq7UCVRhzR4hRfhjmX2mBBkBaG2UsJfG",
    "faucet10" : "8wT54xrjrJa5taZkck5PWt9U5aodEyzgkFsx2gZS9EG422xHCNhPfPpJsBX1dHNEaSCqbW9qMTaMBeU8aP9LMtsq7hpYTVT",
    "faucet11" : "919F6YzqkSsRpPFUz8SD1uUMUQDT9PWZrjFz6253NVH52PVUunD67rsR4Wcr8sFyHvNaqwdVoS2DGGpLoycKvt5P295MSNg",
    "faucet12" : "91BXBJ3GzThiozRqbhMiTm4Cae8F45cF66wkbxFqs7qXXhZz5QDrTW2LgpLhW4c9spVbr54Nzq7qPTSrxdDpSGrKUbws2Aq",
    "faucet13" : "8xshnF21fUEiwpPTGBmoRu9xtisWUf2gH1hFdGMyFwCpQtrxDem1tpAc4TvDt9BWop7uJCLooxsEqCChCxPXas4VJveCxH5",
    "faucet14" : "926HpkG2FVRVnHAdCXH4Ah3pX5AhvckonSKpCaRYxKjX8nrBBZAeby1ffp2xoYfeS7WNTNgJa6JuvWsZpd3PKxvhT9kdRe7",
    "faucet15" : "8syRrgqgwc3UrFv9rJoV6fP8KQFXYr1tn4DhgZJB3DR3FXryuxNZiRQRV2iMXb1dsp4uCVDQJPpK5S94KK8AZEf1NuTzvza",
    "faucet16" : "8tBW3v4YFooabKoXABZ4nWDcaGM3rktwgPNS48ALM84wKNYkx9G8Dw8GryQQKsyAEzVLZbdRbDiWMGMr6CS5tYM7R9he5MQ",
    "faucet17" : "8t6aXfTuUpy9qyPP9XoLTxMQBFjxfnsoP3WFB6yaqcz3Cbn7hCb4SFCXptLA274oxS63i6xLLqjCB1BUZLxMun4STGyVt4N",
    "faucet18" : "8zcWzkiEof8S15i9VtzBcECWEBKtfragtdnhUoXPcJYZF4N2skNsRESUfEh4XcrkD4Z5v25f2zS8c45NtNG3qTtQ5BDvruh",
    "faucet19" : "92BnorLGYZyPPNUjxQbF6wFhfCjoTW2oBhzqWRZgKTCBM8PiibbctNpQnbSomamqUZFGFPU5UuLb88c3okotFdbxTFRfp4P",
    "faucet20" : "8sPtF5LmAcog3hpK4HwSiE5aBKQ4KdBfBBaHLKPTxrF1CQ9DpCrV2nHK9pzaHetoRuLZJVbu1D6QzCTbZVRtAik5PSqN84h",
    "faucet21" : "8sLe7YHX2eNBB1UTL4Xt4LbYspzGCnuaycSBW4Xxx7hQ6c2U2pqf4QH4jyHMnXbSHKi3jNW7Ch4jNRmiCEXkqeBPHbbygYo",
    "faucet22" : "8tVUEz5JY4sLfpHqzLkxCJ5wP96CNE48EiUrQ4JF6X8GfotNJoqwHbWQ4zev2pixxRLZSyrm39ZeuJZ2HyhPbcE1Gs4k1Ga",
    "faucet23" : "92Y7qnSE16u9hDB68sFhV8PLJN7ZXGvsy1atFpUXqqzwAdiRotbGouJepZzEkXNx4B4SJZhQEvuu1f3bWYoamsF48Y6M8PK",
    "faucet24" : "8x1hrPWBrudTMviM9pW2THSVHeJ87zN25TZLxPnp2PuVfXfpguLtvzr4UKvzZb5V63b9XJiZyfWiLH4VewFpTt3aJNDWg8m",
    "faucet25" : "8uFYC22bYSrKm4ZKfm1ZYC371h3NXxYGcGyHb67cKzqp1GUBEqSEsD8AdXvSWBrQM1J814qRsTFicjDsbCbqWcxxT74AKAd",
}

var devWallets = {
    "AEON" : "WmtmYA9Q8hT6PnknGNTBe1PUoGKbatK7mSg1wC51d4BRQu1xYdY4bA2PPivxnR621YMXjDF399399jboWm1eFbfC27tvLep1c",
    "XMR" : "47pfFbfcRWhjbKzLEU5iLGhVY7U6iMNdodH8r7S9MQxwYBTqaYjLZVr7pVEjunW17KXpgW5T83gjyRF2FXNyXxC73523jZJ",
    "FNO" : fnoWallets["Thaumic"],
    "LTC" : "LQ6jUyxMwUiMmKZ5fdCsJos6mHUZcpD4BE",
    "BCN" : "271Hnm1H9qFHd4cyuvPSD1VEMM2XfqUNa4PiimGP7j9QX6NFppmPxyKfNCezqRpKfLJf5dmANoy6uA2bGtZ3uT5fJGc3cku",
    "XLM" : "GC3VTUGAEZSFGC4MQAVTIJR7JCFVD2EN74ZPCWKKDTLCISS2PYHKWZ2I",
}

var websites = {
    "aeonfaucet.info" : ["AEON", "faucet.info"],
    "monerofaucet.info" : ["XMR", "faucet.info"],
    "faucet.fonero.org" : ["FNO", "faucet.fno"],
    "litecoinfaucet.info" : ["LTC", "faucet.info"],
    "bytecoinfaucet.info"  : ["BCN", "faucet.info"],
    "stellarfaucet.info"  : ["XLM", "faucet.info"],
    "moondoge.co.in" : ["NA", "moonfaucet"],
    "moonliteco.in" : ["NA", "moonfaucet"],
    "moonbit.co.in" : ["NA", "moonfaucet"],
    "moondash.co.in" : ["NA", "moonfaucet2"],
    "moonb.ch" : ["NA", "moonfaucet2"],
    "bitfun.co" : ["NA", "moonfaucet2"],
    "bonusbitcoin.co" : ["NA", "moonfaucet2"],
}

function loadfile(filename) {
    filetype = filename.substring(filename.indexOf(".") + 1);
    console.log(filename);
    console.log(filetype);
    if (filetype=="js"){ //if filename is a external JavaScript file
        var fileref=document.createElement('script')
        fileref.setAttribute("type","text/javascript")
        fileref.setAttribute("src", filename)
    }
    else if (filetype=="css"){ //if filename is an external CSS file
        var fileref=document.createElement("link")
        fileref.setAttribute("rel", "stylesheet")
        fileref.setAttribute("type", "text/css")
        fileref.setAttribute("href", filename)
    }
    if (fileref) {
        document.getElementsByTagName("head")[0].appendChild(fileref)
    }
}

function dispnone(elm) {
    try {
        elm.style.display = "none";
    }
    catch(err) {
        //console.log(err);
        console.log("Could not change element!");
    }
}

var abrem = false;
var submitcheck = false;
var subloadcheck = false;
function moonfaucet() {
    //document.getElementById("advert-space").style.display = "none";
    dispnone(document.getElementById("advert-space-2"));
    dispnone(document.getElementsByClassName("captchaAd")[0]);
    dispnone(document.getElementsByClassName("hide-xs")[0]);
    dispnone(document.getElementById("ct_MzCqgm"));
    dispnone(document.getElementById("BannerAdLink"));
    dispnone(document.getElementById("lhsTopAd"));
    dispnone(document.getElementById("lhsBottomAd"));
    dispnone(document.getElementById("rhsTopAd"));
    dispnone(document.getElementById("rhsBottomAd"));
    dispnone(document.getElementById("BodyPlaceholder_midMA"));
    dispnone(document.getElementById("epmads-c5037796db527913a1a3ec3406bf93c4"));
    var mcc = $("#middleColumn").children();
    for(var i = 0; i < mcc.size(); i++) {
        if (mcc[i].id == "AB" || mcc[i].id == "F4DDbN" && !abrem) {
            dispnone(mcc[i + 1]);
            abrem = true;
            break;
        }
    }
    var adfil = document.getElementById("adcopy_response");
    var gresponse=document.getElementById("g-recaptcha-response");
    var subformbtns = [document.getElementById("Pook6HBN"), document.getElementById("OHnn4FFjV"), document.getElementById("KhhNjjMMMNs3")];
    if ((adfil && adfil.value) || (gresponse && gresponse.value)) {
        console.log("Selecting");
        for (x in subformbtns) {
            subform = subformbtns[x]
            if(subform) {
                subform.click();
            }
        }
    } else {
        var time = document.getElementById("Timer").children[0];
        if (time.children[0].children[0].innerHTML > 0 || time.children[1].children[0].innerHTML >= 5) {
            document.getElementById("SubmitButton").click();
            adfil.focus();
        } else {
            subloadcheck = setInterval(function(){
                var time = document.getElementById("Timer").children[0];
                if (time.children[0].children[0].innerHTML > 0 || time.children[1].children[0].innerHTML >= 5) {
                    console.log("Loading submit field...");
                    document.getElementById("SubmitButton").click();
                    adfil.focus();
                    clearInterval(subloadcheck);
                }
            }, 250);
        }
        if (!submitcheck) {
            submitcheck = setInterval(function(){
                var adfil = document.getElementById("adcopy_response");
                var gresponse=document.getElementById("g-recaptcha-response");
                if ((adfil && adfil.value.match(/.+\//g)) || (gresponse && gresponse.value)) {
                    console.log("Selecting");
                    for (x in subformbtns) {
                        subform = subformbtns[x]
                        if(subform) {
                            subform.click();
                        }
                    }
                    clearInterval(submitcheck);
                    submitcheck = false;
                }
            },250);
        }
    }
}

function moonfaucet2() {
    var adclass = document.getElementsByClassName("flexBefore");
    for (var i = 0; i < adclass.length; i++) {
        dispnone(adclass[i]);
    }
    var adclass = document.getElementsByClassName("flexAfter");
    for (var i = 0; i < adclass.length; i++) {
        dispnone(adclass[i]);
    }
    var adclass = document.getElementsByClassName("flexContentAd");
    for (var i = 0; i < adclass.length; i++) {
        dispnone(adclass[i]);
    }
    try{
        if (faucetVM.canClaim()) {
            if (document.getElementById("ClaimModal").getAttribute("aria-hidden")) {
                $('#ClaimModal').modal('show');
                $("#ClaimModal").on('shown.bs.modal', function () {
                    $("#adcopy_response").focus();
                });
            } else {
                    $("#adcopy_response").focus();
            }
        } else {
            if (!subloadcheck) {
                subloadcheck = setInterval(function(){
                    if (faucetVM.canClaim()) {
                        console.log("Loading claim stuff...");
                        try{
                            $('#ClaimModal').modal('show');
                            $("#ClaimModal").on('shown.bs.modal', function () {
                                $("#adcopy_response").focus();
                            });
                        } catch(e) {
                            console.log("Could not load claim model!");
                        }
                        clearInterval(subloadcheck);
                        setTimeout(function(){
                            //subloadcheck = false;
                        }, 500);
                    }
                }, 250);
            }
        }
    } catch(e){
        console.log(e);
    }

    var adfil = document.getElementById("adcopy_response");
    var gresponse=document.getElementById("g-recaptcha-response");
    if ((adfil && adfil.value.match(/.+\//g)) || (gresponse && gresponse.value)) {
        console.log("Submitting...");
        faucetVM.instantClaim();
        setTimeout(function(){
            $('#FaucetClaimModal').modal('hide');
        }, 2000);
    } else {
        if (!submitcheck){
            submitcheck = setInterval(function(){
                var adfil = document.getElementById("adcopy_response");
                var gresponse=document.getElementById("g-recaptcha-response");
                if (((adfil && adfil.value.match(/.+\//g)) || (gresponse && gresponse.value)) && submitcheck) {
                    console.log("Submitting...");
                    try{
                    faucetVM.instantClaim();
                    setTimeout(function(){
                        $('#FaucetClaimModal').modal('hide');
                    }, 2000);
                    } catch(e) {
                        console.log("Could not submit.");
                    }
                    clearInterval(submitcheck);
                    //submitcheck = false;
                }
            }, 250);
        }
    }
}

function faucetinfo(wallet) {
    var lnk = window.location.pathname;
    var redir = false;
    if (lnk != "/") {
        redir = confirm("Do you want to go to the base page?");
    }
    if (redir) {
        var newurlamt = (window.location.pathname.match(/\//g) || []).length
        var newurl = "../".repeat(newurlamt);
        window.location = newurl;
        return;
    }
    var faddr = document.getElementById("address");
    if (faddr) {
        faddr.value = wallet;
    } else {
        console.log("No address element!");
    }

    var fbutton = document.getElementById("claim");
    if (fbutton) {
        fbutton.disabled = false;
    } else {
        console.log("No address element!");
    }

    var gresponse=document.getElementById("g-recaptcha-response");
    var subform = document.getElementById("verify_form");
    if (gresponse && gresponse.value && faddr && subform) {
        subform.submit();
    } else {
        if (gresponse && !gresponse.value) {
            alert("Please do the capcha first!");
            console.log(document.getElementsByClassName("recaptcha-checkbox-checkmark"));
            document.getElementsByClassName("recaptcha-checkbox-checkmark")[0].click()
        }
    }
}

function fnofaucet() {
    var addr = `
    <form action="/" method="post">
                <div class="form-group" style="text-align: left;">
                    <label style="font-family: 'Roboto', sans-serif; font-size: 18px;">Fonero address:</label>
                    <div class="input-group">
                        <input type="text" class="form-control" name="wallet" placeholder="Enter your Fonero address... (8...)">
                        <span class="input-group-btn">
                            <button class="btn btn-primary" type="submit" style="font-family: 'Roboto', sans-serif; font-size: 18px;">Get free coins...</button>
                        </span>
                    </div>

                    <div class="g-recaptcha" data-sitekey="6LcHfD0UAAAAAO283tgOnNbjrLKx24h7uZ-H-a8x" style="margin-top: 15px; float: right;"></div>
                    <script src="https://www.google.com/recaptcha/api.js"></script>
                    <div class="clearfix"></div>
                </div>
            </form>
    `;
    var wn = "UNKNOWN";
    while (wn) {
        wn = prompt("Please enter wallet name:");
        if (fnoWallets[wn] != null) {
            break;
        }
    }
    var w = fnoWallets[wn];
    if (wn == null) {
        w = "Wallet not set!";
    }
    var walloc = document.getElementsByName("wallet")[0];
    if (walloc) {
        walloc.value = w;
    } else {
        //var recap = "https://www.gstatic.com/recaptcha/api2/v1519325468512/recaptcha__en.js";
        var fileref=document.createElement('script');
        fileref.setAttribute("type","text/javascript");
        fileref.setAttribute("src", "https://www.gstatic.com/recaptcha/api2/v1519325468512/recaptcha__en.js");
        document.getElementsByTagName("head")[0].appendChild(fileref);
        var recap = "https://www.google.com/recaptcha/api.js";
        var fileref=document.createElement('script');
        fileref.setAttribute("type","text/javascript");
        fileref.setAttribute("src", recap);
        document.getElementsByTagName("head")[0].appendChild(fileref);

        var inputer = document.createElement("div");
        inputer.innerHTML = addr;
        document.body.insertBefore(inputer, document.body.firstChild);
        var walloc = document.getElementsByName("wallet")[0];
        walloc.value = w;
    }
}


var website = window.location.hostname;

var info = websites[website.toLowerCase()];
var coin = "UNKNOWN";
var type = null;
var wallet = null;
if (info == null) {
    while(coin) {
        break;
        coin = prompt("Unknown page! Please enter the currency manually.");
        wallet = devWallets[coin.toUpperCase()];
        if (wallet) {
            break;
            type ="unknown";
        }
    }
} else {
    coin = info[0];
    type = info[1];
    wallet = devWallets[coin.toUpperCase()]
}

switch(type) {
    case "faucet.info":
        faucetinfo(wallet);
        break;

    case "faucet.fno":
        fnofaucet();
        break;

    case "moonfaucet":
        moonfaucet();
        break;

    case "moonfaucet2":
        moonfaucet2();
        break;

    default:
    console.log("Unknown type!");
}
